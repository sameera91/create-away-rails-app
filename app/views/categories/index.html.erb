<h1>List of categories</h1>

<% @categories.each do |category| %>
  <p><%= link_to category.name, category_path(category), :class => "category_title" %></p>
  <div class=projectName-<%= category.id %>></div><br>
<%end%>

<script type="text/javascript" charset="utf-8">

  $(function () {

  $(".view").hide();
  
  $(".category_title").on("click", function(event) {
    event.preventDefault();

    var projectUrl = event["target"]["href"];

    var projectId = projectUrl.slice(-1);
    
    $.get(projectUrl + ".json", function(data) {

        data["projects"].forEach(function(object){
          $(".projectName-" + data.id).append(object.title + '</br>');
        })

    });
  });
});

</script>